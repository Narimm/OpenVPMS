<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 4.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_4_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->
<page-specification class="org.openvpms.component.presentation.tapestry.page.SearchPage">
	<property name="currentObject" />
    <property name="archetypeName" />
    <property name="searchName" persist="session"/>
    
    <!-- The Search Form components -->
    <component id="searchForm" type="Form">
        <binding name="direct" value="false" />
    </component>   
    <component id="archetypeCombo" type="PropertySelection">
        <binding name="displayName" value="literal: Type "/>
        <binding name="model" value="getArchetypeSearchModel()"/>
        <binding name="value" value="archetypeName" />
    </component>
    <component id="searchName" type="TextField">
        <binding name="displayName" value="literal:Name"/>
        <binding name="value" value="searchName" />
    </component> 
    <component id="newButton" type="Submit">
        <binding name="action" value="listener:onNew"/>
    </component>
    <component id="searchButton" type="Submit">
        <binding name="action" value="listener:onSearch"/>
    </component>             

    <!-- The List components -->
    <component id="table" type="contrib:Table">
        <binding name="row" value="currentObject"/>
        <binding name="source" value="converter.values"/>
        <binding name="columns" value="literal:id,type,name,!description"/>
        <binding name="pageSize" value="20"/>
        <binding name="converter" value="converter"/>
        <binding name="rowClass" value="literal:even" />
        <binding name="columnClass" value="literal:tp" />
    </component>	
    <component id="idColumnValue" type="Block" />
    <component id="typeColumnValue" type="Block" />
    <component id="nameColumnValue" type="Block" />
    <component id="descriptionColumnValue" type="Block" />
    <component id="nameLink" type="DirectLink">
        <binding name="listener" value="listener:onNameClick"/>
        <binding name="parameters" value="currentObject" />
    </component>
    <component id="insertId" type="Insert">
        <binding name="value" value="jxpath:pathToObject(currentObject,'uid')"/>
    </component>
    <component id="insertType" type="Insert">
        <binding name="value" value="jxpath:pathToObject(currentObject,'archetypeId/concept')"/>
    </component>
    <component id="insertName" type="Insert">
        <binding name="value" value="jxpath:pathToObject(currentObject,'name')"/>
    </component>
    <component id="insertDescription" type="Insert">
        <binding name="value" value="jxpath:pathToObject(currentObject,'description')"/>
    </component>
</page-specification>
