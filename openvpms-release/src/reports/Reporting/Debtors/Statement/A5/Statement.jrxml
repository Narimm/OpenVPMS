<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Statement" pageWidth="421" pageHeight="595" columnWidth="381" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isSummaryWithPageHeaderAndFooter="true" resourceBundle="localisation.reports" uuid="a2d428cb-08c8-47c1-9845-f814d41bf117">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="166"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="org.openvpms.archetype.function.party.PartyFunctions"/>
	<import value="org.openvpms.component.business.domain.im.party.Party"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="Base" isDefault="true" hTextAlign="Left" vTextAlign="Middle" fontName="DejaVu Sans" fontSize="7"/>
	<parameter name="dataSource" class="org.openvpms.report.jasper.IMObjectCollectionDataSource" isForPrompting="false"/>
	<parameter name="statementDate" class="java.util.Date" isForPrompting="false"/>
	<parameter name="overdueBalance" class="java.math.BigDecimal" isForPrompting="false"/>
	<parameter name="IsEmail" class="java.lang.Boolean" isForPrompting="false">
		<parameterDescription><![CDATA[If true, indicates the report is being emailed, to enable different formatting]]></parameterDescription>
		<defaultValueExpression><![CDATA[Boolean.FALSE]]></defaultValueExpression>
	</parameter>
	<field name="customer.entity.name" class="java.lang.String"/>
	<field name="customer.entity" class="org.openvpms.component.business.domain.im.party.Party"/>
	<field name="startTime" class="java.util.Date"/>
	<field name="amount" class="java.math.BigDecimal"/>
	<field name="tax" class="java.math.BigDecimal"/>
	<field name="displayName" class="java.lang.String"/>
	<field name="credit" class="java.lang.Boolean"/>
	<field name="status.code" class="java.lang.String"/>
	<field name="shortName" class="java.lang.String"/>
	<field name="printed" class="java.lang.Boolean"/>
	<field name="customer.entity.companyName" class="java.lang.String"/>
	<field name="customer.entity.initials" class="java.lang.String"/>
	<field name="customer.entity.title" class="java.lang.String"/>
	<field name="customer.entity.firstName" class="java.lang.String"/>
	<field name="customer.entity.lastName" class="java.lang.String"/>
	<field name="hide" class="java.lang.Boolean"/>
	<field name="[party:getBillingAddress(.)]" class="java.lang.String"/>
	<field name="customer.entity.id" class="java.lang.Long"/>
	<field name="[normalize-space(party:getBillingAddress(.))]" class="java.lang.String"/>
	<field name="[normalize-space(party:getBillingAddress(party:getLetterheadContacts($OpenVPMS.location)))]" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="[party:getEmailAddress(party:getLetterheadContacts($OpenVPMS.location))]" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="[party:getTelephone(party:getLetterheadContacts($OpenVPMS.location))]" class="java.lang.String"/>
	<field name="[party:getFaxNumber(party:getLetterheadContacts($OpenVPMS.location))]" class="java.lang.String"/>
	<field name="OpenVPMS.location.letterhead.target.creditCardInstructions" class="java.lang.String"/>
	<field name="OpenVPMS.location.letterhead.target.directDepositInstructions" class="java.lang.String"/>
	<field name="OpenVPMS.location.letterhead.target.directDepositReference" class="java.lang.String"/>
	<field name="OpenVPMS.location.letterhead.target.paymentOption3" class="java.lang.String"/>
	<field name="OpenVPMS.location.letterhead.target.paymentOption4" class="java.lang.String"/>
	<field name="customer.entity.type.generalMessage" class="java.lang.String"/>
	<field name="customer.entity.type.overdueMessage" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="[openvpms:get($OpenVPMS.location,&quot;letterhead.target.lineItemPrint&quot;)]" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="OpenVPMS.location.letterhead.target.subreport" class="java.lang.String"/>
	<field name="OpenVPMS.location.letterhead.target.useProductTypes" class="java.lang.Boolean"/>
	<field name="OpenVPMS.practice.showPricesTaxInclusive" class="java.lang.Boolean">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="[count(list:distinct(., &quot;items.target.patient.entity.id&quot;))]" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="incTax" class="java.lang.Boolean">
		<variableExpression><![CDATA[$F{OpenVPMS.practice.showPricesTaxInclusive}]]></variableExpression>
		<initialValueExpression><![CDATA[Boolean.FALSE]]></initialValueExpression>
	</variable>
	<variable name="hasTax" class="java.lang.Boolean">
		<variableExpression><![CDATA[$F{shortName}.contentEquals("act.customerAccountBadDebt")||
$F{shortName}.contentEquals("act.customerAccountChargesCounter")||
$F{shortName}.contentEquals("act.customerAccountChargesCredit")||
$F{shortName}.contentEquals("act.customerAccountChargesInvoice")||
$F{shortName}.contentEquals("act.customerAccountCreditAdjust")||
$F{shortName}.contentEquals("act.customerAccountDebitAdjust")]]></variableExpression>
	</variable>
	<variable name="tax" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{hasTax}?$F{tax}:BigDecimal.ZERO]]></variableExpression>
	</variable>
	<variable name="statementFromTime" class="java.util.Date" resetType="None" calculation="First">
		<variableExpression><![CDATA[$F{startTime}]]></variableExpression>
	</variable>
	<variable name="amount" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{incTax}?$F{amount}:$F{amount}.subtract($V{tax})]]></variableExpression>
	</variable>
	<variable name="BALANCE" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? $F{amount}.negate() : $F{amount}]]></variableExpression>
	</variable>
	<variable name="hide" class="java.lang.Boolean">
		<variableExpression><![CDATA[($F{hide}==null)?Boolean.FALSE:$F{hide}]]></variableExpression>
	</variable>
	<variable name="DEBIT_TOTAL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? BigDecimal.ZERO:($V{hide}?BigDecimal.ZERO:$V{amount})]]></variableExpression>
	</variable>
	<variable name="CREDIT_TOTAL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? ($V{hide}?BigDecimal.ZERO:$V{amount}): BigDecimal.ZERO]]></variableExpression>
	</variable>
	<variable name="DEBIT_TOTAL_ALL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? BigDecimal.ZERO :$V{amount}]]></variableExpression>
	</variable>
	<variable name="CREDIT_TOTAL_ALL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())?$V{amount}: BigDecimal.ZERO]]></variableExpression>
	</variable>
	<variable name="hiddenOK" class="java.lang.Boolean">
		<variableExpression><![CDATA[$V{DEBIT_TOTAL}.subtract($V{CREDIT_TOTAL}).subtract($V{DEBIT_TOTAL_ALL}).add($V{CREDIT_TOTAL_ALL}).compareTo(BigDecimal.ZERO)==0?Boolean.TRUE:Boolean.FALSE]]></variableExpression>
	</variable>
	<variable name="CustomerFullName" class="java.lang.String" resetType="None">
		<variableExpression><![CDATA[(($F{customer.entity.title} == null) ? "": $F{customer.entity.title}) + " " + (($F{customer.entity.firstName} == null) ? "": $F{customer.entity.firstName}) + " " + $F{customer.entity.lastName}]]></variableExpression>
	</variable>
	<variable name="RefName" class="java.lang.String">
		<variableExpression><![CDATA[($F{customer.entity.companyName} != null) ? ($F{customer.entity.companyName}+"     ").substring(0,5).toUpperCase(): ($F{customer.entity.lastName}+"     ").substring(0,5).toUpperCase()]]></variableExpression>
	</variable>
	<variable name="DEBIT_TOTAL_TAX_ALL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? BigDecimal.ZERO:$V{tax}]]></variableExpression>
	</variable>
	<variable name="CREDIT_TOTAL_TAX_ALL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())?$V{tax}: BigDecimal.ZERO]]></variableExpression>
	</variable>
	<variable name="DEBIT_TOTAL_TAX" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? BigDecimal.ZERO :($V{hide}?BigDecimal.ZERO:$V{tax})]]></variableExpression>
	</variable>
	<variable name="CREDIT_TOTAL_TAX" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[($F{credit}.booleanValue())? ($V{hide}?BigDecimal.ZERO:$V{tax}): BigDecimal.ZERO]]></variableExpression>
	</variable>
	<variable name="showCredCardInstr" class="java.lang.Boolean">
		<variableExpression><![CDATA[($F{OpenVPMS.location.letterhead.target.creditCardInstructions}==null)?Boolean.FALSE:
($F{OpenVPMS.location.letterhead.target.creditCardInstructions}.trim().length()>0)]]></variableExpression>
	</variable>
	<variable name="showDirDepInstr" class="java.lang.Boolean">
		<variableExpression><![CDATA[($F{OpenVPMS.location.letterhead.target.directDepositInstructions}==null)?Boolean.FALSE:
($F{OpenVPMS.location.letterhead.target.directDepositInstructions}.trim().length()>0)]]></variableExpression>
	</variable>
	<variable name="showPayOpt3" class="java.lang.Boolean">
		<variableExpression><![CDATA[($F{OpenVPMS.location.letterhead.target.paymentOption3}==null)?Boolean.FALSE:
($F{OpenVPMS.location.letterhead.target.paymentOption3}.trim().length()>0)]]></variableExpression>
	</variable>
	<variable name="showPayOpt4" class="java.lang.Boolean">
		<variableExpression><![CDATA[($F{OpenVPMS.location.letterhead.target.paymentOption4}==null)?Boolean.FALSE:
($F{OpenVPMS.location.letterhead.target.paymentOption4}.trim().length()>0)]]></variableExpression>
	</variable>
	<variable name="customerFullName" class="java.lang.String" calculation="First">
		<variableExpression><![CDATA[(($F{customer.entity.title} == null) ? "": ($F{customer.entity.title} + " ")) + (($F{customer.entity.initials} == null) ? "": ($F{customer.entity.initials} + " ")) + $F{customer.entity.lastName}]]></variableExpression>
		<initialValueExpression><![CDATA[(($F{customer.entity.title} == null) ? "": ($F{customer.entity.title} + " ")) + (($F{customer.entity.initials} == null) ? "": ($F{customer.entity.initials} + " ")) + $F{customer.entity.lastName}]]></initialValueExpression>
	</variable>
	<variable name="printLineItems" class="java.lang.Boolean">
		<variableExpression><![CDATA[$F{shortName}.contains("customerAccountCharges") &&
($F{[openvpms:get($OpenVPMS.location,"letterhead.target.lineItemPrint")]}==null?Boolean.TRUE:
($F{[openvpms:get($OpenVPMS.location,"letterhead.target.lineItemPrint")]}.equals("N")?Boolean.FALSE:
	($F{[openvpms:get($OpenVPMS.location,"letterhead.target.lineItemPrint")]}.equals("A")?Boolean.TRUE:(!$F{printed}))
))]]></variableExpression>
	</variable>
	<variable name="ImbalanceAmount" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$V{DEBIT_TOTAL}.subtract($V{CREDIT_TOTAL}).subtract($V{DEBIT_TOTAL_ALL}).add($V{CREDIT_TOTAL_ALL})]]></variableExpression>
	</variable>
	<variable name="isOTC" class="java.lang.Boolean">
		<variableExpression><![CDATA[$F{shortName}.equals("act.customerAccountChargesCounter")]]></variableExpression>
	</variable>
	<group name="Dummy Group" footerPosition="ForceAtBottom">
		<groupFooter>
			<band height="177">
				<line>
					<reportElement key="line-4" positionType="Float" x="0" y="11" width="381" height="1" uuid="0c9c37e9-38a7-47c1-ab69-9203fa2891c4"/>
					<graphicElement>
						<pen lineWidth="1.0" lineStyle="Dotted"/>
					</graphicElement>
				</line>
				<staticText>
					<reportElement key="staticText-17" positionType="Float" x="265" y="20" width="58" height="12" uuid="99a5205d-3f27-423f-9f0c-4680e2402ccf"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="7"/>
					</textElement>
					<text><![CDATA[Amount Owing:]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-18" positionType="Float" x="265" y="31" width="58" height="12" uuid="a77706cf-839e-4563-9463-24468080e665"/>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="7"/>
					</textElement>
					<text><![CDATA[Amount paid:]]></text>
				</staticText>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-9" positionType="Float" x="326" y="19" width="45" height="13" uuid="29204625-7bc0-416b-a955-8a705ea187a6">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{BALANCE}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-5" positionType="Float" x="326" y="42" width="45" height="1" uuid="9ae365ec-9baa-4209-9c45-3d38254cd1c2"/>
				</line>
				<staticText>
					<reportElement positionType="Float" x="45" y="1" width="17" height="22" uuid="05ab3a98-6326-43d4-9828-6b27f690f571">
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					</reportElement>
					<textElement>
						<font fontName="DejaVu Sans" size="16" pdfEncoding=""/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[✂]]></text>
				</staticText>
				<staticText>
					<reportElement positionType="Float" x="117" y="1" width="17" height="22" uuid="daf503e0-eb4a-4025-8c46-24f9e107f028">
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					</reportElement>
					<textElement>
						<font fontName="DejaVu Sans" size="16" pdfEncoding=""/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[✂]]></text>
				</staticText>
				<staticText>
					<reportElement positionType="Float" x="189" y="1" width="18" height="22" uuid="6e1b55e4-67d5-4ca5-9f98-d81774569e25">
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					</reportElement>
					<textElement>
						<font fontName="DejaVu Sans" size="16" pdfEncoding=""/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[✂]]></text>
				</staticText>
				<staticText>
					<reportElement positionType="Float" x="261" y="1" width="18" height="22" uuid="82ebe30e-e3d3-4dd2-bf22-74550c6f04e1">
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					</reportElement>
					<textElement>
						<font fontName="DejaVu Sans" size="16" pdfEncoding=""/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[✂]]></text>
				</staticText>
				<staticText>
					<reportElement positionType="Float" x="335" y="1" width="17" height="22" uuid="6554460f-d1d7-4a3e-964f-e8b9f04248cc">
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					</reportElement>
					<textElement>
						<font fontName="DejaVu Sans" size="16" pdfEncoding=""/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[✂]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-16" positionType="Float" x="0" y="18" width="123" height="17" uuid="eb3c27f9-58d1-4b41-998c-dfe0a5d7a906">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="11" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[Remittance Advice]]></text>
				</staticText>
				<frame>
					<reportElement positionType="Float" x="20" y="47" width="344" height="66" isRemoveLineWhenBlank="true" uuid="aa4be260-0f1b-461a-a9a3-d5eec6f91783">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
					</reportElement>
					<box padding="2">
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<rectangle radius="10">
						<reportElement positionType="Float" mode="Transparent" x="173" y="0" width="167" height="62" uuid="48be5349-91f9-459e-872f-5d325741405d">
							<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
						</reportElement>
					</rectangle>
					<staticText>
						<reportElement key="staticText-23" positionType="Float" x="179" y="6" width="146" height="12" isRemoveLineWhenBlank="true" uuid="666feee7-69b3-4874-ad3a-7979efe166ec">
							<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<text><![CDATA[Card No: _ _ _ _  _ _ _ _  _ _ _ _  _ _ _ _]]></text>
					</staticText>
					<staticText>
						<reportElement key="staticText-24" positionType="Float" x="179" y="21" width="146" height="10" isRemoveLineWhenBlank="true" uuid="ebddfb65-792e-4919-998c-5fa85cd8821c">
							<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<text><![CDATA[Expires:  _ _ / _ _  Verification No:  _ _ _]]></text>
					</staticText>
					<staticText>
						<reportElement key="staticText-27" positionType="Float" x="179" y="47" width="161" height="13" isRemoveLineWhenBlank="true" uuid="50c4d4f1-8d3e-4ac0-99ec-750d011c7b40">
							<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement verticalAlignment="Middle">
							<paragraph lineSpacing="Single"/>
						</textElement>
						<text><![CDATA[Signature:_______________________________
]]></text>
					</staticText>
					<staticText>
						<reportElement key="staticText-23" positionType="Float" x="179" y="34" width="161" height="11" isRemoveLineWhenBlank="true" uuid="1b3af124-81e8-4d5d-8a2c-5703738f773c">
							<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<text><![CDATA[Name on Card: ___________________________]]></text>
					</staticText>
					<textField isStretchWithOverflow="true" isBlankWhenNull="true">
						<reportElement key="staticText-22" positionType="Float" x="1" y="0" width="155" height="60" isRemoveLineWhenBlank="true" uuid="f035bcb2-9158-4b63-83ce-5b1f2e503f44">
							<printWhenExpression><![CDATA[$V{showCredCardInstr}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{OpenVPMS.location.letterhead.target.creditCardInstructions}]]></textFieldExpression>
					</textField>
				</frame>
				<frame>
					<reportElement positionType="Float" x="20" y="113" width="344" height="14" isRemoveLineWhenBlank="true" uuid="3e8157d4-b821-4c51-9aaf-45526ca3b4dc">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<printWhenExpression><![CDATA[$V{showDirDepInstr}]]></printWhenExpression>
					</reportElement>
					<box padding="2">
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textField isStretchWithOverflow="true" isBlankWhenNull="true">
						<reportElement key="staticText-28" positionType="Float" x="1" y="1" width="336" height="9" isRemoveLineWhenBlank="true" uuid="b33d0133-c9c1-4841-8fbd-b21c5533fa46">
							<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<printWhenExpression><![CDATA[$V{showDirDepInstr}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<font size="7"/>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{OpenVPMS.location.letterhead.target.directDepositInstructions}.replaceFirst("\\[REF\\]",($V{RefName}+$F{customer.entity.id}.toString()))]]></textFieldExpression>
					</textField>
				</frame>
				<frame>
					<reportElement positionType="Float" x="20" y="127" width="344" height="14" isRemoveLineWhenBlank="true" uuid="f230ffe2-ccd4-47aa-83d6-0a9be1c1954c">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<printWhenExpression><![CDATA[$V{showPayOpt3}]]></printWhenExpression>
					</reportElement>
					<box padding="2">
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textField isStretchWithOverflow="true" isBlankWhenNull="true">
						<reportElement key="staticText-28" positionType="Float" x="1" y="1" width="336" height="9" isRemoveLineWhenBlank="true" uuid="1a576bdb-803b-4821-bfb8-246a1b903c38">
							<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<printWhenExpression><![CDATA[$V{showPayOpt3}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<font size="7"/>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{OpenVPMS.location.letterhead.target.paymentOption3}]]></textFieldExpression>
					</textField>
				</frame>
				<frame>
					<reportElement positionType="Float" x="20" y="141" width="344" height="14" isRemoveLineWhenBlank="true" uuid="3da2e4ae-ca83-495c-b6e8-a612b89a2fe5">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<printWhenExpression><![CDATA[$V{showPayOpt4}]]></printWhenExpression>
					</reportElement>
					<box padding="2">
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textField isStretchWithOverflow="true" isBlankWhenNull="true">
						<reportElement key="staticText-28" positionType="Float" x="1" y="1" width="336" height="9" isRemoveLineWhenBlank="true" uuid="208985b3-d532-4616-b88b-91b4fdc61168">
							<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<printWhenExpression><![CDATA[$V{showPayOpt4}]]></printWhenExpression>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<font size="7"/>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{OpenVPMS.location.letterhead.target.paymentOption4}]]></textFieldExpression>
					</textField>
				</frame>
				<frame>
					<reportElement positionType="Float" x="20" y="155" width="344" height="22" uuid="7c980270-f5fc-444f-a3e1-adfe6279e17e">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box padding="2">
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textField isStretchWithOverflow="true">
						<reportElement positionType="Float" x="21" y="9" width="227" height="9" uuid="834d48dc-f17a-4145-b45b-7f8cb1dec55b">
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						</reportElement>
						<textElement textAlignment="Left">
							<font size="6" isBold="false"/>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA[(($F{[party:getFaxNumber(party:getLetterheadContacts($OpenVPMS.location))]}.length()>0)?
  ("Fax to: "+$F{[party:getFaxNumber(party:getLetterheadContacts($OpenVPMS.location))]}):"")
  +"      Email to: "+$F{[party:getEmailAddress(party:getLetterheadContacts($OpenVPMS.location))]}]]></textFieldExpression>
					</textField>
					<textField isStretchWithOverflow="true">
						<reportElement x="21" y="0" width="227" height="8" uuid="9a776be3-c692-48b4-bc1d-d608838e5247">
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
						</reportElement>
						<textElement>
							<font size="6" isBold="false"/>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA["Mail to: "+$F{[normalize-space(party:getBillingAddress(party:getLetterheadContacts($OpenVPMS.location)))]}]]></textFieldExpression>
					</textField>
					<textField isBlankWhenNull="false">
						<reportElement key="textField-8" positionType="Float" x="268" y="9" width="70" height="9" uuid="e03cf1b2-a51b-47c2-96dc-eb35de3bfacb">
							<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
						</reportElement>
						<box>
							<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
							<bottomPen lineWidth="0.0" lineColor="#000000"/>
							<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textElement>
							<font size="5"/>
							<paragraph lineSpacing="Single"/>
						</textElement>
						<textFieldExpression><![CDATA[$F{customer.entity.name}]]></textFieldExpression>
					</textField>
					<textField>
						<reportElement x="268" y="0" width="70" height="8" uuid="4e2a7a76-2367-4d48-8eae-5f03613a6657"/>
						<textElement>
							<font size="5"/>
						</textElement>
						<textFieldExpression><![CDATA["Customer ID  "+$F{customer.entity.id}.toString()]]></textFieldExpression>
					</textField>
					<staticText>
						<reportElement x="0" y="0" width="21" height="19" uuid="3ed321e2-bf1a-4b5d-8e57-ec7b30e6de2e">
							<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
							<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						</reportElement>
						<textElement textAlignment="Center">
							<font fontName="DejaVu Sans Mono" size="16"/>
						</textElement>
						<text><![CDATA[✻]]></text>
					</staticText>
				</frame>
			</band>
		</groupFooter>
	</group>
	<group name="Statement Group">
		<groupFooter>
			<band height="115">
				<staticText>
					<reportElement key="staticText-12" positionType="Float" x="225" y="47" width="57" height="12" isRemoveLineWhenBlank="true" uuid="ebccdc0d-e1c1-4fec-9515-d06aaeca87f3">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Balance]]></text>
				</staticText>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField" positionType="Float" x="284" y="47" width="46" height="12" isRemoveLineWhenBlank="true" uuid="0ef5f847-8506-4e2c-8d29-be254a52f285">
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{BALANCE}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-13" positionType="Float" isPrintRepeatedValues="false" x="225" y="59" width="57" height="11" isRemoveLineWhenBlank="true" uuid="4d970376-d835-4a3c-a0bf-de25e86f73d1">
						<printWhenExpression><![CDATA[$P{overdueBalance}.compareTo( BigDecimal.ZERO )>0]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Overdue]]></text>
				</staticText>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField" positionType="Float" isPrintRepeatedValues="false" x="284" y="59" width="46" height="11" isRemoveLineWhenBlank="true" uuid="dbd24e74-c427-4e75-9dd5-f37054673722">
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<printWhenExpression><![CDATA[$P{overdueBalance}.compareTo( BigDecimal.ZERO )>0]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$P{overdueBalance}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-6" positionType="Float" x="284" y="36" width="46" height="11" isRemoveLineWhenBlank="true" uuid="d6d71714-c7d9-4654-9016-88b61ee14708">
						<property name="local_mesure_unitx" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<printWhenExpression><![CDATA[$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{DEBIT_TOTAL_TAX}:$V{DEBIT_TOTAL_TAX_ALL}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-7" positionType="Float" x="330" y="36" width="45" height="11" isRemoveLineWhenBlank="true" uuid="44524899-e556-4eb5-b1ed-8bb584c68a3d">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<printWhenExpression><![CDATA[$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{CREDIT_TOTAL_TAX}:$V{CREDIT_TOTAL_TAX_ALL}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-6" positionType="Float" x="284" y="25" width="46" height="11" isRemoveLineWhenBlank="true" uuid="9269a76f-7ebe-4b44-8d6b-439e3111fdd2">
						<property name="local_mesure_unitx" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<printWhenExpression><![CDATA[!$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{DEBIT_TOTAL}.add($V{DEBIT_TOTAL_TAX}):$V{DEBIT_TOTAL_ALL}.add( $V{DEBIT_TOTAL_TAX_ALL})]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-7" positionType="Float" x="330" y="25" width="45" height="11" isRemoveLineWhenBlank="true" uuid="b6a0427c-f9df-4cb1-9816-308fd4c3970d">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<printWhenExpression><![CDATA[!$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{CREDIT_TOTAL}.add($V{CREDIT_TOTAL_TAX}):$V{CREDIT_TOTAL_ALL}.add( $V{CREDIT_TOTAL_TAX_ALL})]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-6" positionType="Float" x="284" y="13" width="46" height="12" isRemoveLineWhenBlank="true" uuid="f5973e20-99b3-493a-a7a5-81514e105006">
						<property name="local_mesure_unitx" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<printWhenExpression><![CDATA[!$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{DEBIT_TOTAL_TAX}:$V{DEBIT_TOTAL_TAX_ALL}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-7" positionType="Float" x="330" y="13" width="45" height="12" isRemoveLineWhenBlank="true" uuid="d9d8ea51-48a0-4a3f-b044-f79bca0ccc2d">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<printWhenExpression><![CDATA[!$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{CREDIT_TOTAL_TAX}:$V{CREDIT_TOTAL_TAX_ALL}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement key="textField-13" positionType="Float" stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="0" y="72" width="381" height="14" isRemoveLineWhenBlank="true" uuid="6d03fe12-5563-484b-a8a2-2fe29ab24a56"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[($P{overdueBalance}.compareTo(BigDecimal.ZERO) == 0) ? $F{customer.entity.type.generalMessage} : $F{customer.entity.type.overdueMessage}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement key="staticText-15" positionType="Float" x="195" y="36" width="87" height="11" isRemoveLineWhenBlank="true" uuid="bd4e4989-8cd2-44c5-90b8-f89f9036fc1a">
						<printWhenExpression><![CDATA[$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Includes "+$R{text.taxName}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement key="staticText-15" x="200" y="2" width="82" height="11" isRemoveLineWhenBlank="true" uuid="1709d501-6100-4f09-9828-85b196bdf197">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Transaction Total]]></text>
				</staticText>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-6" x="284" y="2" width="46" height="11" isRemoveLineWhenBlank="true" uuid="560ece69-5bd7-4bef-9ee5-000cd1db1d25">
						<property name="local_mesure_unitx" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{DEBIT_TOTAL}:$V{DEBIT_TOTAL_ALL}]]></textFieldExpression>
				</textField>
				<textField pattern="¤ #,##0.00" isBlankWhenNull="false">
					<reportElement key="textField-7" x="330" y="2" width="45" height="11" isRemoveLineWhenBlank="true" uuid="aec26342-9c7f-4cf4-b70b-989d87335088">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?$V{CREDIT_TOTAL}:$V{CREDIT_TOTAL_ALL}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement key="line-3" x="0" y="1" width="381" height="1" uuid="a2840ca5-cba8-4c96-a964-3d48ba08b247"/>
				</line>
				<staticText>
					<reportElement key="staticText-15" positionType="Float" x="225" y="13" width="57" height="12" isRemoveLineWhenBlank="true" uuid="1ef97549-23a4-409b-a232-c6a2f34f56dc">
						<printWhenExpression><![CDATA[!$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[Tax Total
]]></text>
				</staticText>
				<staticText>
					<reportElement key="staticText-15" positionType="Float" x="195" y="25" width="87" height="11" isRemoveLineWhenBlank="true" uuid="9a32b3e6-8ac3-499b-82e5-b706c16a2adf">
						<printWhenExpression><![CDATA[!$V{incTax}]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right">
						<font size="8" isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
					<reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="86" width="381" height="28" isRemoveLineWhenBlank="true" uuid="fd2cf332-623b-42c2-aaf8-ea3f50a5ecc7">
						<property name="local_mesure_unitwidth" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="local_mesure_unitheight" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<printWhenExpression><![CDATA[Boolean.TRUE||!$V{hiddenOK}]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{hiddenOK}?"":("!!! HIDDEN Transaction ERROR !!! - Totals show all transactions - Imbalance="+$V{ImbalanceAmount}.toString())+"\nUse Customer Running Balance Report to investigate"]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="99" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
			<subreport isUsingCache="false">
				<reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="0" y="0" width="381" height="18" isPrintWhenDetailOverflows="true" uuid="7a171ad1-19ee-4423-bb0c-586f2a5c2d0c">
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<subreportParameter name="IsEmail">
					<subreportParameterExpression><![CDATA[$P{IsEmail}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="pageNo">
					<subreportParameterExpression><![CDATA[$V{PAGE_NUMBER}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[$P{dataSource}.getDataSource("customer")]]></dataSourceExpression>
				<subreportExpression><![CDATA[(($F{OpenVPMS.location.letterhead.target.subreport}==null)?"Letterhead":$F{OpenVPMS.location.letterhead.target.subreport})+(($P{JASPER_REPORT}.getPageWidth()<450)?"-A5":"")+".jrxml"]]></subreportExpression>
			</subreport>
			<textField pattern="" isBlankWhenNull="false">
				<reportElement key="textField-3" positionType="Float" x="325" y="66" width="56" height="10" uuid="a8446620-9f22-4f5b-82e8-70a2259d60c3">
					<property name="local_mesure_unitheight" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[DateFormat.getDateInstance(DateFormat.SHORT, $P{REPORT_LOCALE}).format($F{startTime})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement key="staticText-2" positionType="Float" x="275" y="76" width="49" height="10" uuid="05dae5b8-6d89-4215-bb0b-56b34dff5bb6">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[To]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-3" positionType="Float" x="275" y="66" width="49" height="10" uuid="7e65ef07-fb1a-4ae9-9458-216f1faa55a6">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[From]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement key="textField-4" positionType="Float" x="325" y="76" width="56" height="10" uuid="799f8d70-bd76-4bcf-a898-24675d20fb15">
					<property name="local_mesure_unitx" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[DateFormat.getDateInstance(DateFormat.SHORT, $P{REPORT_LOCALE}).format($P{statementDate})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="275" y="56" width="49" height="10" uuid="051c833f-77de-47c3-9573-73978eca79cb">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Customer ID]]></text>
			</staticText>
			<textField>
				<reportElement positionType="Float" x="325" y="56" width="56" height="10" uuid="c6d552b0-f95a-433a-82f7-dd6d001de83c">
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{customer.entity.id}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Master">
				<reportElement positionType="Float" x="325" y="86" width="56" height="9" uuid="540f1472-968c-4cbd-8d32-dd3e3faf45a5"/>
				<textElement textAlignment="Left"/>
				<textFieldExpression><![CDATA["Page 1 of "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement key="staticText-1" positionType="Float" x="267" y="18" width="114" height="38" uuid="43da339e-3729-400a-ba9f-c48af7c6c386"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="12" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{text.statementTitle}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement positionType="Float" x="0" y="18" width="262" height="77" uuid="364c2789-963c-4628-9262-8bfb6630966d">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<subreportParameter name="Addr1">
					<subreportParameterExpression><![CDATA[$F{customer.entity.companyName}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="Addr2">
					<subreportParameterExpression><![CDATA[$V{CustomerFullName}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="Addr3">
					<subreportParameterExpression><![CDATA[$F{[party:getBillingAddress(.)]}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[$P{dataSource}.getDataSource("customer")]]></dataSourceExpression>
				<subreportExpression><![CDATA[(($F{OpenVPMS.location.letterhead.target.subreport}==null)?"Letterhead":$F{OpenVPMS.location.letterhead.target.subreport})+" AddressBlock"+(($P{JASPER_REPORT}.getPageWidth()<450)?"-A5":"")+".jrxml"]]></subreportExpression>
			</subreport>
		</band>
	</title>
	<pageHeader>
		<band height="43" splitType="Stretch">
			<printWhenExpression><![CDATA[$V{PAGE_NUMBER}>1]]></printWhenExpression>
			<textField>
				<reportElement key="staticText-1" positionType="Float" x="88" y="18" width="204" height="20" uuid="3c38df70-f168-4f83-86e8-46113f5ebb52">
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font size="12" isBold="true"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$R{text.statementTitle}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement positionType="Float" x="350" y="18" width="31" height="9" uuid="d269baf8-ab13-46dd-9d53-1491d0a04abd"/>
				<textElement textAlignment="Left">
					<font size="5"/>
				</textElement>
				<textFieldExpression><![CDATA[" of " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="Float" x="304" y="18" width="46" height="9" uuid="de73f9fb-58a5-46b6-936f-a3854d9941f9">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Right">
					<font size="5"/>
				</textElement>
				<textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<subreport isUsingCache="false">
				<reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="0" y="0" width="381" height="18" isPrintWhenDetailOverflows="true" uuid="12978e27-a1e7-498a-be8a-7dd9f8e80f52">
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<subreportParameter name="IsEmail">
					<subreportParameterExpression><![CDATA[$P{IsEmail}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="pageNo">
					<subreportParameterExpression><![CDATA[$V{PAGE_NUMBER}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[$P{dataSource}.getDataSource("customer")]]></dataSourceExpression>
				<subreportExpression><![CDATA[(($F{OpenVPMS.location.letterhead.target.subreport}==null)?"Letterhead":$F{OpenVPMS.location.letterhead.target.subreport})+(($P{JASPER_REPORT}.getPageWidth()<450)?"-A5":"")+".jrxml"]]></subreportExpression>
			</subreport>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="12" splitType="Stretch">
			<staticText>
				<reportElement key="staticText-7" x="0" y="1" width="32" height="9" uuid="67f1cb96-322d-444c-964b-2d6b8d989e7b">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-8" x="42" y="1" width="133" height="9" uuid="8ea0d311-dde7-4a24-a328-6603c247cf32"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Description]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-9" x="282" y="1" width="46" height="9" uuid="367cedbc-9c10-4358-a37c-09688a7acfef">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="local_mesure_unitx" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Debit]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-11" x="330" y="1" width="45" height="9" uuid="f0954121-e35a-47f2-b55e-1040f6466a1c">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="local_mesure_unitx" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[Credit]]></text>
			</staticText>
			<line>
				<reportElement key="line-1" x="0" y="11" width="381" height="1" uuid="e3626310-75de-470b-8396-7c099f9621fd">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
				</reportElement>
			</line>
			<line>
				<reportElement key="line-1" x="0" y="0" width="381" height="1" uuid="deaee4da-3988-4b93-bbfe-64cdb2ffd71c"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<printWhenExpression><![CDATA[!$V{hide}]]></printWhenExpression>
			<textField pattern="dd/MM/yy" isBlankWhenNull="false">
				<reportElement key="textField" x="0" y="1" width="32" height="9" uuid="759c55e5-a7f0-4e81-ab41-dd062f3b6d65">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{startTime}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="false">
				<reportElement key="textField" x="42" y="1" width="180" height="9" uuid="5fe268d2-a78e-4475-ae63-ce6fcdf0eda1">
					<property name="local_mesure_unitx" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{displayName}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="284" y="1" width="46" height="9" uuid="241c7d76-8789-4a59-9795-b4e787f7206d">
					<printWhenExpression><![CDATA[(!$V{printLineItems}) && (!$F{credit}.booleanValue())]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{amount}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement key="textField-5" x="330" y="1" width="45" height="9" uuid="09391450-5831-430a-8c53-3765c90adc1e">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<printWhenExpression><![CDATA[(!$V{printLineItems}) && ($F{credit}.booleanValue())]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{amount}]]></textFieldExpression>
			</textField>
			<subreport isUsingCache="true">
				<reportElement key="subreport-1" stretchType="RelativeToBandHeight" x="0" y="10" width="381" height="10" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="4d5b097d-c6f9-425d-abae-4e2c99915382">
					<property name="local_mesure_unitx" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					<printWhenExpression><![CDATA[$V{printLineItems}]]></printWhenExpression>
				</reportElement>
				<subreportParameter name="incTax">
					<subreportParameterExpression><![CDATA[$V{incTax}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="patientCount">
					<subreportParameterExpression><![CDATA[$V{isOTC}?0:$F{[count(list:distinct(., "items.target.patient.entity.id"))]}.intValue()]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="isOTC">
					<subreportParameterExpression><![CDATA[$V{isOTC}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[$P{dataSource}.getDataSource("items")]]></dataSourceExpression>
				<subreportExpression><![CDATA[$F{OpenVPMS.location.letterhead.target.useProductTypes}==null?
("Statement Items.jrxml"):
("Statement Items"+($F{OpenVPMS.location.letterhead.target.useProductTypes}?"-PT":"")+".jrxml")]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement x="377" y="0" width="4" height="9" uuid="625dcaef-339d-462a-8d3b-7b3dd7db1f1a">
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<printWhenExpression><![CDATA[$V{incTax}?Boolean.FALSE:$V{tax}.compareTo(BigDecimal.ZERO)!=0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center"/>
				<text><![CDATA[*]]></text>
			</staticText>
		</band>
		<band height="10">
			<printWhenExpression><![CDATA[$V{printLineItems}   && (!$V{hide})]]></printWhenExpression>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="284" y="1" width="46" height="9" isRemoveLineWhenBlank="true" uuid="94bd7623-f5c7-41d1-bfe0-b98e40e1b8d9">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[new Boolean(($F{shortName}.contains("customerAccountCharges"))&&(!$F{credit}.booleanValue()))]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{amount}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="284" y="0" width="46" height="1" uuid="fb05b46e-42c9-40d3-8aa8-3a30a2919c31">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[new Boolean(($F{shortName}.contains("customerAccountCharges"))&&(!$F{credit}.booleanValue()))]]></printWhenExpression>
				</reportElement>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement key="textField" x="330" y="1" width="45" height="9" isRemoveLineWhenBlank="true" uuid="fce5484a-fd25-4fd4-8e53-9e3e3fbabc92">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[new Boolean(($F{shortName}.contains("customerAccountCharges"))&&($F{credit}.booleanValue()))]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{amount}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="330" y="0" width="45" height="1" uuid="345df1f0-9aae-4660-9ce5-070379016cce">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[new Boolean(($F{shortName}.contains("customerAccountCharges"))&&($F{credit}.booleanValue()))]]></printWhenExpression>
				</reportElement>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement x="377" y="0" width="4" height="9" uuid="e9ff8dd6-5518-4c06-9786-ba9ed5667966">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[$V{incTax}?Boolean.FALSE:$V{tax}.compareTo(BigDecimal.ZERO)!=0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center"/>
				<text><![CDATA[*]]></text>
			</staticText>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="15">
			<textField isStretchWithOverflow="true" evaluationTime="Report" isBlankWhenNull="true">
				<reportElement positionType="Float" isPrintRepeatedValues="false" x="0" y="0" width="381" height="14" isRemoveLineWhenBlank="true" uuid="7203480b-7aa3-4edd-aa2c-3ab322540914">
					<property name="local_mesure_unitwidth" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="local_mesure_unitheight" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<printWhenExpression><![CDATA[Boolean.TRUE||!$V{hiddenOK}]]></printWhenExpression>
				</reportElement>
				<textElement>
					<font size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{hiddenOK}?"":("!!! HIDDEN Transaction ERROR !!! - Totals show all transactions - Imbalance="+$V{ImbalanceAmount}.toString())]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
