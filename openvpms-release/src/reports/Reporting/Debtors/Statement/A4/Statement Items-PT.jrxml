<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.2.0.final using JasperReports Library version 6.2.0  -->
<!-- 2016-06-19T10:19:33 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Statement Items PT" pageWidth="595" pageHeight="842" columnWidth="595" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" resourceBundle="localisation.reports" uuid="19487d56-4a98-4267-9537-701ec61a1e4d">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="org.openvpms.component.business.domain.im.party.Party"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="Base" isDefault="true" hTextAlign="Left" vTextAlign="Middle" fontSize="10"/>
	<parameter name="incTax" class="java.lang.Boolean">
		<parameterDescription><![CDATA[]]></parameterDescription>
	</parameter>
	<queryString>
		<![CDATA[]]>
	</queryString>
	<field name="target.total" class="java.math.BigDecimal"/>
	<field name="target.tax" class="java.math.BigDecimal"/>
	<field name="target.patient.entity.name" class="java.lang.String"/>
	<field name="target.product.entity.type.target.name" class="java.lang.String"/>
	<field name="target.quantity" class="java.math.BigDecimal"/>
	<field name="target.product.entity.printedName" class="java.lang.String"/>
	<field name="target.startTime" class="java.sql.Timestamp"/>
	<field name="target.product.entity.type.target.sortOrder" class="java.lang.Integer"/>
	<field name="target.product.entity.name" class="java.lang.String"/>
	<field name="target.patient.entity.id" class="java.lang.Long"/>
	<field name="[date:format(openvpms:get(.,&quot;target.startTime&quot;),&quot;yyyyMMdd&quot;)]" class="java.lang.String"/>
	<field name="target.template.entity.name" class="java.lang.String"/>
	<field name="target.template.entity.printAggregate" class="java.lang.Boolean"/>
	<field name="target.template" class="java.lang.Object"/>
	<field name="target.print" class="java.lang.Boolean"/>
	<field name="target.template.entity.printedName" class="java.lang.String"/>
	<field name="target.template.entity.type.target.name" class="java.lang.String"/>
	<field name="target.template.entity.type.target.sortOrder" class="java.lang.Integer"/>
	<field name="target.template.entity.id" class="java.lang.Long"/>
	<field name="target.id" class="java.lang.Long"/>
	<field name="[date:format(openvpms:get(.,&quot;target.startTime&quot;),&quot;HHmmss&quot;)]" class="java.lang.String"/>
	<field name="target.credit" class="java.lang.Boolean"/>
	<field name="target.shortName" class="java.lang.String"/>
	<sortField name="target.patient.entity.name"/>
	<sortField name="[date:format(openvpms:get(.,&quot;target.startTime&quot;),&quot;yyyyMMdd&quot;)]"/>
	<sortField name="showTemplate" order="Descending" type="Variable"/>
	<sortField name="prodTypeOrder" type="Variable"/>
	<sortField name="sortName" type="Variable"/>
	<sortField name="target.startTime"/>
	<variable name="showTemplate" class="java.lang.Boolean">
		<variableExpression><![CDATA[($F{target.template.entity.printAggregate} == null)?Boolean.FALSE:
$F{target.template.entity.printAggregate}.booleanValue()]]></variableExpression>
	</variable>
	<variable name="templateTypeOrder" class="java.lang.Integer">
		<variableExpression><![CDATA[($F{target.template.entity.type.target.sortOrder} == null)?0:
$F{target.template.entity.type.target.sortOrder}]]></variableExpression>
	</variable>
	<variable name="isNotNoCharge" class="java.lang.Boolean">
		<variableExpression><![CDATA[new Boolean(($F{target.product.entity.type.target.name}!=null)?(!($F{target.product.entity.type.target.name}.indexOf("No Charge")==0)):(Boolean.TRUE))]]></variableExpression>
		<initialValueExpression><![CDATA[new Boolean(true)]]></initialValueExpression>
	</variable>
	<variable name="date_ymd" class="java.lang.String">
		<variableExpression><![CDATA[$F{[date:format(openvpms:get(.,"target.startTime"),"yyyyMMdd")]}]]></variableExpression>
		<initialValueExpression><![CDATA[]]></initialValueExpression>
	</variable>
	<variable name="prodType" class="java.lang.String">
		<variableExpression><![CDATA[($V{showTemplate})?
(($F{target.template.entity.type.target.name}==null)?"**Template has no Type**":$F{target.template.entity.type.target.name}):
(($F{target.product.entity.type.target.name}==null)?"**Product has no Type**":$F{target.product.entity.type.target.name})]]></variableExpression>
	</variable>
	<variable name="prodTypeOrder" class="java.lang.Integer">
		<variableExpression><![CDATA[$V{showTemplate}?
$V{templateTypeOrder}:
$F{target.product.entity.type.target.sortOrder}]]></variableExpression>
	</variable>
	<variable name="prodPrint Name" class="java.lang.String">
		<variableExpression><![CDATA[($F{target.product.entity.printedName} == null) ? $F{target.product.entity.name}: $F{target.product.entity.printedName}]]></variableExpression>
	</variable>
	<variable name="tmplPrint Name" class="java.lang.String">
		<variableExpression><![CDATA[($F{target.template.entity.printedName} == null) ? $F{target.template.entity.name}: $F{target.template.entity.printedName}]]></variableExpression>
	</variable>
	<variable name="sortName" class="java.lang.String">
		<variableExpression><![CDATA[$V{showTemplate}?$V{tmplPrint Name}:$V{prodPrint Name}]]></variableExpression>
	</variable>
	<variable name="credit" class="java.lang.Boolean">
		<variableExpression><![CDATA[$F{target.shortName}.equals("act.customerAccountCounterItem")?Boolean.FALSE:$F{target.credit}]]></variableExpression>
	</variable>
	<variable name="taxR" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{target.tax}.setScale(2, BigDecimal.ROUND_HALF_UP)]]></variableExpression>
	</variable>
	<variable name="templateTotal" class="java.math.BigDecimal" resetType="Group" resetGroup="templateGroup" calculation="Sum">
		<variableExpression><![CDATA[$F{target.total}]]></variableExpression>
	</variable>
	<variable name="templateTax" class="java.math.BigDecimal" resetType="Group" resetGroup="templateGroup" calculation="Sum">
		<variableExpression><![CDATA[$V{taxR}]]></variableExpression>
	</variable>
	<group name="patientGroup" isReprintHeaderOnEachPage="true" minHeightToStartNewPage="20">
		<groupExpression><![CDATA[$F{target.patient.entity.id}]]></groupExpression>
		<groupHeader>
			<band height="11">
				<property name="local_mesure_unitheight" value="pixel"/>
				<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				<printWhenExpression><![CDATA[!$F{target.shortName}.equals("act.customerAccountCounterItem")]]></printWhenExpression>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false">
					<reportElement key="textField-1" x="27" y="0" width="300" height="11" isPrintWhenDetailOverflows="true" printWhenGroupChanges="patientGroup" uuid="d1b57956-305a-475c-b3d1-12123ca524b8">
						<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<printWhenExpression><![CDATA[!$F{target.shortName}.equals("act.customerAccountCounterItem")]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{target.patient.entity.id}!=null?$F{target.patient.entity.name}+"  (ID:"+$F{target.patient.entity.id}+")":"-patient not specified-"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="templateGroup">
		<groupExpression><![CDATA[$F{target.template.entity.id}]]></groupExpression>
		<groupFooter>
			<band height="11">
				<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				<printWhenExpression><![CDATA[$V{showTemplate}]]></printWhenExpression>
				<textField isStretchWithOverflow="true" pattern="dd/MM">
					<reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="20" y="0" width="32" height="11" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" printWhenGroupChanges="patientGroup" uuid="ebcb838e-3133-4cf3-b4da-bbd28575b608">
						<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					</reportElement>
					<textElement textAlignment="Right">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{target.startTime}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="60" y="0" width="110" height="11" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" printWhenGroupChanges="patientGroup" uuid="895bb5cf-2e7b-4b29-8d52-4006001c6a12">
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{target.template.entity.type.target.name}==null)?"**Product has no Type**":$F{target.template.entity.type.target.name}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="false">
					<reportElement key="textField-4" x="170" y="0" width="179" height="11" isRemoveLineWhenBlank="true" uuid="f017be30-83d7-4043-9342-a891314de386">
						<property name="local_mesure_unity" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
						<property name="local_mesure_unitx" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{tmplPrint Name}]]></textFieldExpression>
				</textField>
				<textField pattern="###0.00" isBlankWhenNull="false">
					<reportElement key="textField-2" x="394" y="0" width="64" height="11" uuid="c0356316-2671-4f96-ad0a-f87f4d471e4d">
						<printWhenExpression><![CDATA[new Boolean(!$F{target.credit}.booleanValue())]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isItalic="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{templateTotal}]]></textFieldExpression>
				</textField>
				<textField pattern="###0.00" isBlankWhenNull="false">
					<reportElement key="textField-2" x="461" y="0" width="64" height="11" uuid="aabee04b-d92a-4547-91c2-698b5dfd5881">
						<printWhenExpression><![CDATA[new Boolean($F{target.credit}.booleanValue())]]></printWhenExpression>
					</reportElement>
					<box>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isItalic="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{templateTotal}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="528" y="0" width="11" height="11" uuid="4cb51276-2363-4586-9340-da8f91edc678">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
						<printWhenExpression><![CDATA[$P{incTax}?Boolean.FALSE:$V{templateTax}.compareTo(BigDecimal.ZERO)!=0]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Center">
						<font size="8"/>
					</textElement>
					<text><![CDATA[*]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="11">
			<property name="local_mesure_unitheight" value="pixel"/>
			<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
			<printWhenExpression><![CDATA[(!$V{showTemplate})&&($F{target.print} == null || $F{target.print} || $F{target.total}.compareTo(BigDecimal.ZERO) != 0)]]></printWhenExpression>
			<textField isStretchWithOverflow="true" pattern="dd/MM">
				<reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="20" y="0" width="31" height="11" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true" printWhenGroupChanges="patientGroup" uuid="523718c5-f31a-4324-8311-2f91650761d0">
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{target.startTime}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement stretchType="RelativeToBandHeight" isPrintRepeatedValues="false" x="60" y="0" width="110" height="11" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true" printWhenGroupChanges="patientGroup" uuid="598e5b4d-54e0-44a6-a927-d97bc293ff00">
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{target.product.entity.type.target.name}==null)?"**Product has no Type**":$F{target.product.entity.type.target.name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="false">
				<reportElement key="textField-4" x="170" y="0" width="179" height="11" isRemoveLineWhenBlank="true" uuid="62de9087-7bff-4985-a6bf-bcafdb09d511">
					<property name="local_mesure_unity" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="local_mesure_unitx" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{prodPrint Name}]]></textFieldExpression>
			</textField>
			<textField pattern="##0.##" isBlankWhenNull="false">
				<reportElement key="textField-3" x="369" y="0" width="24" height="11" isRemoveLineWhenBlank="true" uuid="c26941d4-1d7b-41af-b17e-a910e0bc9965">
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{target.quantity}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00" isBlankWhenNull="false">
				<reportElement key="textField-2" x="394" y="0" width="64" height="11" uuid="46a9c5b3-72b9-46ca-85e2-2a3b556b75d9">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[!$V{credit}]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isItalic="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{incTax}?$F{target.total}:$F{target.total}.subtract($V{taxR})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="356" y="0" width="13" height="11" uuid="a8910e1d-587f-4b5d-a0f6-7548e2c24425"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[x]]></text>
			</staticText>
			<textField pattern="###0.00" isBlankWhenNull="false">
				<reportElement key="textField-2" x="461" y="0" width="64" height="11" uuid="253ce6c5-eddf-418b-b26d-5611e27cdd3b">
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[$V{credit}]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isItalic="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{incTax}?$F{target.total}:$F{target.total}.subtract($V{taxR})]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="528" y="0" width="11" height="11" uuid="81cbfb23-756b-45e5-9bf1-e1c2a4c1c918">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<printWhenExpression><![CDATA[$P{incTax}?Boolean.FALSE:$F{target.tax}.compareTo(BigDecimal.ZERO)!=0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font size="8"/>
				</textElement>
				<text><![CDATA[*]]></text>
			</staticText>
		</band>
	</detail>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
