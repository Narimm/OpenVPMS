<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Version: 1.0
  ~
  ~ The contents of this file are subject to the OpenVPMS License Version
  ~ 1.0 (the 'License'); you may not use this file except in compliance with
  ~ the License. You may obtain a copy of the License at
  ~ http://www.openvpms.org/license/
  ~
  ~ Software distributed under the License is distributed on an 'AS IS' basis,
  ~ WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
  ~ for the specific language governing rights and limitations under the
  ~ License.
  ~
  ~ Copyright 2015 (C) OpenVPMS Ltd. All Rights Reserved.
  -->

<!-- Created with Jaspersoft Studio version 6.0.3.final using JasperReports Library version 6.0.3  -->
<!-- 2015-05-12T20:52:36 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="Statement" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="30" rightMargin="30"
              topMargin="19" bottomMargin="20" uuid="a2d428cb-08c8-47c1-9845-f814d41bf117">
    <property name="ireport.scriptlethandling" value="0"/>
    <property name="ireport.encoding" value="UTF-8"/>
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="166"/>
    <import value="org.openvpms.component.business.domain.im.party.Party"/>
    <import value="net.sf.jasperreports.engine.*"/>
    <import value="java.util.*"/>
    <import value="org.openvpms.archetype.function.party.PartyFunctions"/>
    <import value="net.sf.jasperreports.engine.data.*"/>
    <parameter name="dataSource" class="org.openvpms.report.jasper.IMObjectCollectionDataSource"
               isForPrompting="false"/>
    <parameter name="statementDate" class="java.util.Date" isForPrompting="false"/>
    <parameter name="overdueBalance" class="java.math.BigDecimal" isForPrompting="false"/>
    <parameter name="IsEmail" class="java.lang.Boolean" isForPrompting="false">
        <parameterDescription>
            <![CDATA[If true, indicates the report is being emailed, to enable different formatting]]></parameterDescription>
        <defaultValueExpression><![CDATA[Boolean.FALSE]]></defaultValueExpression>
    </parameter>
    <field name="author.entity.name" class="java.lang.String"/>
    <field name="customer.entity.name" class="java.lang.String"/>
    <field name="customer.entity" class="org.openvpms.component.business.domain.im.party.Party"/>
    <field name="startTime" class="java.util.Date"/>
    <field name="id" class="java.lang.Long"/>
    <field name="tax" class="java.math.BigDecimal"/>
    <field name="notes" class="java.lang.String"/>
    <field name="[party:getBillingAddress(openvpms:get(.,&apos;customer.entity&apos;))]" class="java.lang.String"/>
    <field name="amount" class="java.math.BigDecimal"/>
    <field name="displayName" class="java.lang.String"/>
    <field name="credit" class="java.lang.Boolean"/>
    <field name="status" class="java.lang.String"/>
    <field name="shortName" class="java.lang.String"/>
    <field name="printed" class="java.lang.Boolean"/>
    <field name="[party:getPartyFullName(openvpms:get(.,&apos;customer.entity&apos;))]" class="java.lang.String"/>
    <field name="customer.entity.companyName" class="java.lang.String"/>
    <field name="customer.entity.initials" class="java.lang.String"/>
    <field name="customer.entity.title" class="java.lang.String"/>
    <field name="customer.entity.lastName" class="java.lang.String"/>
    <field name="hide" class="java.lang.Boolean"/>
    <field name="[party:getBillingAddress(.)]" class="java.lang.String"/>
    <field name="[party:getPartyFullName(.)]" class="java.lang.String"/>
    <variable name="statementFromTime" class="java.util.Date" resetType="None" calculation="First">
        <variableExpression><![CDATA[$F{startTime}]]></variableExpression>
    </variable>
    <variable name="BALANCE" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression>
            <![CDATA[($F{credit}.booleanValue())? $F{amount}.negate() : $F{amount}]]></variableExpression>
    </variable>
    <variable name="hide" class="java.lang.Boolean">
        <variableExpression><![CDATA[($F{hide}==null)?Boolean.FALSE:$F{hide}]]></variableExpression>
    </variable>
    <variable name="DEBIT_TOTAL" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression><![CDATA[($F{credit}.booleanValue())? new BigDecimal("0.00") :
($V{hide}?new BigDecimal("0.00"):$F{amount})]]></variableExpression>
    </variable>
    <variable name="CREDIT_TOTAL" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression>
            <![CDATA[($F{credit}.booleanValue())? ($V{hide}?new BigDecimal("0.00"):$F{amount}): new BigDecimal("0.00")]]></variableExpression>
    </variable>
    <variable name="DEBIT_TOTAL_ALL" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression>
            <![CDATA[($F{credit}.booleanValue())? new BigDecimal("0.00") :$F{amount}]]></variableExpression>
    </variable>
    <variable name="CREDIT_TOTAL_ALL" class="java.math.BigDecimal" calculation="Sum">
        <variableExpression>
            <![CDATA[($F{credit}.booleanValue())?$F{amount}: new BigDecimal("0.00")]]></variableExpression>
    </variable>
    <variable name="hiddenOK" class="java.lang.Boolean">
        <variableExpression>
            <![CDATA[$V{DEBIT_TOTAL}.subtract($V{CREDIT_TOTAL}).subtract($V{DEBIT_TOTAL_ALL}).add($V{CREDIT_TOTAL_ALL}).compareTo(BigDecimal.ZERO)==0?Boolean.TRUE:Boolean.FALSE]]></variableExpression>
    </variable>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="180" splitType="Stretch">
            <staticText>
                <reportElement x="10" y="10" width="517" height="24" uuid="2a7fb0eb-1d21-4b0d-bf76-2c8cea225cb3">
                    <printWhenExpression><![CDATA[$P{IsEmail}.equals(Boolean.TRUE)]]></printWhenExpression>
                </reportElement>
                <text><![CDATA[Email Letterhead. Replace this label with the practice logo and details.]]></text>
            </staticText>
            <staticText>
                <reportElement x="10" y="34" width="517" height="20" uuid="b6721fea-b655-4e5c-be6c-c38d0c915253">
                    <printWhenExpression><![CDATA[$P{IsEmail}.equals(Boolean.TRUE)]]></printWhenExpression>
                </reportElement>
                <text><![CDATA[
                    This is automatically hidden when printing. See the "Print When Expression" property for more details.]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="148" splitType="Stretch">
            <staticText>
                <reportElement key="staticText-1" x="149" y="0" width="236" height="29"
                               uuid="e8e07935-8664-42f6-91da-228d8e8248d2">
                    <property name="local_mesure_unity" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.y" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[Statement of Account]]></text>
            </staticText>
            <textField pattern="dd/MM/yyyy" isBlankWhenNull="false">
                <reportElement key="textField-3" x="367" y="58" width="148" height="16"
                               uuid="5966c166-2fcb-4e47-8e42-58e30ed1f358"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{statementFromTime}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-3" x="324" y="58" width="44" height="16"
                               uuid="db557614-ad2e-48d7-bb25-090a6b6b981e"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[From:]]></text>
            </staticText>
            <textField isBlankWhenNull="false">
                <reportElement key="textField" x="367" y="90" width="27" height="16"
                               uuid="9c631eac-d2e9-4a9b-924c-254d86131982"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Left">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{PAGE_NUMBER} + " of "]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report" isBlankWhenNull="false">
                <reportElement key="textField" x="394" y="90" width="44" height="16"
                               uuid="2e0cf84a-78e7-48a0-8456-64496326f97b"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Left">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["" + $V{PAGE_NUMBER} + ""]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-5" x="324" y="90" width="44" height="16"
                               uuid="6b4d86cd-1aaa-44b5-9939-ea6e45610103"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Page]]></text>
            </staticText>
            <textField pattern="dd/MM/yyyy" isBlankWhenNull="false">
                <reportElement key="textField-4" x="367" y="74" width="148" height="16"
                               uuid="67030626-d2cd-4585-aff4-79c87f25f8ca"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{statementDate}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-10" x="324" y="74" width="44" height="16"
                               uuid="190f62be-1dcb-4ba7-b20a-60285232e8c5"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[To:]]></text>
            </staticText>
            <textField isBlankWhenNull="true">
                <reportElement key="textField-12" x="52" y="44" width="253" height="14"
                               uuid="4197edf5-51c9-452e-b51f-2e8a6429e41d"/>
                <textElement>
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{customer.entity.companyName}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement key="textField-1" x="52" y="58" width="253" height="14"
                               uuid="c309b428-d5ba-4a9e-b0d1-b35d954ae957">
                    <property name="local_mesure_unitheight" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.height" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{[party:getPartyFullName(.)]}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false">
                <reportElement key="textField-2" x="52" y="72" width="253" height="38"
                               uuid="85a71b87-0d45-47c3-8f6a-2da21e6f1112"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{[party:getBillingAddress(.)]}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" evaluationTime="Report">
                <reportElement mode="Transparent" x="14" y="113" width="507" height="33" forecolor="#000000"
                               backcolor="#FFFFFF" uuid="c5ca4582-063a-4a06-a240-8d21ef401324"/>
                <box padding="0" topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0"/>
                <textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
                    <font size="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
                    <paragraph lineSpacing="Single" lineSpacingSize="1.0" firstLineIndent="0" leftIndent="0"
                               rightIndent="0" spacingBefore="0" spacingAfter="0" tabStopWidth="40"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{hiddenOK}?"":"!!! Hidden Transaction ERROR !!!\n" +
"Use Customer Running Balance Report to see hidden transactions"]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement key="staticText-7" x="14" y="3" width="75" height="14"
                               uuid="67f1cb96-322d-444c-964b-2d6b8d989e7b"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Date]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-8" x="88" y="3" width="188" height="14"
                               uuid="8ea0d311-dde7-4a24-a328-6603c247cf32">
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Description]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-9" x="386" y="3" width="64" height="14"
                               uuid="367cedbc-9c10-4358-a37c-09688a7acfef">
                    <property name="local_mesure_unitwidth" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                    <property name="local_mesure_unitx" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Debit]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-11" x="453" y="3" width="64" height="14"
                               uuid="f0954121-e35a-47f2-b55e-1040f6466a1c">
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                    <property name="local_mesure_unitx" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Credit]]></text>
            </staticText>
            <line>
                <reportElement key="line-1" x="14" y="19" width="507" height="1"
                               uuid="e3626310-75de-470b-8396-7c099f9621fd"/>
            </line>
        </band>
    </columnHeader>
    <detail>
        <band height="21" splitType="Stretch">
            <printWhenExpression><![CDATA[$V{hide}.equals(Boolean.FALSE)]]></printWhenExpression>
            <textField pattern="dd/MM/yyyy" isBlankWhenNull="false">
                <reportElement key="textField" x="14" y="1" width="75" height="13"
                               uuid="759c55e5-a7f0-4e81-ab41-dd062f3b6d65"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{startTime}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement key="textField" x="88" y="1" width="254" height="13"
                               uuid="5fe268d2-a78e-4475-ae63-ce6fcdf0eda1">
                    <property name="local_mesure_unitx" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{displayName}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00" isBlankWhenNull="false">
                <reportElement key="textField" x="386" y="1" width="64" height="13"
                               uuid="241c7d76-8789-4a59-9795-b4e787f7206d">
                    <printWhenExpression><![CDATA[new Boolean(!$F{credit}.booleanValue())]]></printWhenExpression>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00" isBlankWhenNull="false">
                <reportElement key="textField-5" x="453" y="1" width="64" height="13"
                               uuid="09391450-5831-430a-8c53-3765c90adc1e">
                    <property name="local_mesure_unitwidth" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                    <printWhenExpression><![CDATA[new Boolean($F{credit}.booleanValue())]]></printWhenExpression>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
            </textField>
            <subreport isUsingCache="true">
                <reportElement key="subreport-1" stretchType="RelativeToBandHeight" x="0" y="14" width="535" height="5"
                               isPrintWhenDetailOverflows="true" uuid="4d5b097d-c6f9-425d-abae-4e2c99915382">
                    <property name="local_mesure_unitx" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                    <property name="local_mesure_unitwidth" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                    <printWhenExpression>
                        <![CDATA[new Boolean(!$F{printed}.booleanValue() && $F{shortName}.contains("customerAccountCharges") && !$F{shortName}.contains("customerAccountChargesCounter"))]]></printWhenExpression>
                </reportElement>
                <dataSourceExpression>
                    <![CDATA[$P{dataSource}.getDataSource("items", new String[]{"target.patient.entity.name", "target.startTime"})]]></dataSourceExpression>
                <subreportExpression><![CDATA["Statement Items.jrxml"]]></subreportExpression>
            </subreport>
        </band>
    </detail>
    <columnFooter>
        <band splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="30" splitType="Stretch">
            <property name="local_mesure_unitheight" value="pixel"/>
            <property name="com.jaspersoft.studio.unit.height" value="px"/>
            <line>
                <reportElement key="line-2" x="14" y="6" width="507" height="1"
                               uuid="60ccc0a4-83ca-438c-95f9-a5d891dcff85"/>
            </line>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField" x="386" y="9" width="64" height="18"
                               uuid="0ae1441f-52bf-4dbb-a40c-f894ba1b307f"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{hiddenOK}?$V{DEBIT_TOTAL}:$V{DEBIT_TOTAL_ALL}]]></textFieldExpression>
            </textField>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField" x="453" y="8" width="64" height="18"
                               uuid="07d51685-d2e5-4a11-9de4-2873ce13245c">
                    <property name="local_mesure_unitwidth" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression>
                    <![CDATA[$V{hiddenOK}?$V{CREDIT_TOTAL}:$V{CREDIT_TOTAL_ALL}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-14" x="302" y="9" width="81" height="17"
                               uuid="a9516652-63bd-420c-84c1-299b58fffa5d"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Total :]]></text>
            </staticText>
            <textField isStretchWithOverflow="true" evaluationTime="Report">
                <reportElement stretchType="RelativeToBandHeight" mode="Transparent" x="14" y="9" width="288"
                               height="17" forecolor="#000000" backcolor="#FFFFFF"
                               uuid="615290a3-ea0f-4087-9357-29bf85c70ef3"/>
                <box padding="0" topPadding="0" leftPadding="0" bottomPadding="0" rightPadding="0"/>
                <textElement textAlignment="Left" verticalAlignment="Top" rotation="None" markup="none">
                    <font size="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
                    <paragraph lineSpacing="Single" lineSpacingSize="1.0" firstLineIndent="0" leftIndent="0"
                               rightIndent="0" spacingBefore="0" spacingAfter="0" tabStopWidth="40"/>
                </textElement>
                <textFieldExpression>
                    <![CDATA[$V{hiddenOK}?"":"!!! HIDE TXN ERROR !!! - Totals show all txns"]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
    <lastPageFooter>
        <band height="269" splitType="Stretch">
            <staticText>
                <reportElement key="staticText-12" x="302" y="21" width="81" height="17"
                               uuid="2e99c704-32f5-4420-a4f9-b2b4249fbd57"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Balance :]]></text>
            </staticText>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField" x="386" y="21" width="64" height="18"
                               uuid="dd41d1aa-966f-4fd6-8977-6f053ad10b90">
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{BALANCE}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-13" x="302" y="38" width="81" height="17"
                               uuid="2d767faa-9a86-4836-950c-8c46ac3d5cce"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Overdue :]]></text>
            </staticText>
            <line>
                <reportElement key="line-3" x="14" y="1" width="507" height="1"
                               uuid="11b019b1-9ae1-415d-92c7-8c1d2e82766b"/>
            </line>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField-6" x="386" y="3" width="64" height="18"
                               uuid="ff38c15f-d80d-480d-9dbf-74988de88346">
                    <property name="local_mesure_unitx" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{hiddenOK}?$V{DEBIT_TOTAL}:$V{DEBIT_TOTAL_ALL}]]></textFieldExpression>
            </textField>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField-7" x="453" y="3" width="64" height="18"
                               uuid="c1d01c24-6fd2-4ca0-968f-1cff41582407">
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression>
                    <![CDATA[$V{hiddenOK}?$V{CREDIT_TOTAL}:$V{CREDIT_TOTAL_ALL}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement key="line-4" x="14" y="61" width="507" height="1"
                               uuid="26c6b56c-e8d1-4863-8d3c-3f86046e39b3"/>
                <graphicElement>
                    <pen lineWidth="1.0" lineStyle="Dotted"/>
                </graphicElement>
            </line>
            <staticText>
                <reportElement key="staticText-15" x="302" y="3" width="81" height="17"
                               uuid="cefc5fbd-5d45-47c2-9edf-2f186b6602db"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Total :]]></text>
            </staticText>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField" x="386" y="38" width="64" height="18"
                               uuid="e9ba9e01-f9bd-423a-817f-286e0a1f59d3">
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{overdueBalance}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-16" x="14" y="62" width="226" height="18"
                               uuid="fd16e9b6-60b1-4326-b65f-057f72a6e7e4"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <text><![CDATA[REMITTANCE ADVICE                ]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-17" x="367" y="119" width="81" height="17"
                               uuid="c4e07e66-c3d6-4c39-96ac-be91146c569f"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Amount Owing:]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-18" x="367" y="135" width="81" height="17"
                               uuid="249fc96f-2162-4287-9383-43267d8c3dc5"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Amount paid:]]></text>
            </staticText>
            <textField pattern="¤ #,##0.00" isBlankWhenNull="false">
                <reportElement key="textField-9" x="453" y="118" width="64" height="18"
                               uuid="7016baa3-d764-4421-864b-a37dba81fb07">
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{BALANCE}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement key="line-5" x="453" y="150" width="63" height="1"
                               uuid="a1f33db2-95ca-4317-b2d5-89c757771c0a"/>
            </line>
            <staticText>
                <reportElement key="staticText-19" x="128" y="253" width="298" height="13"
                               uuid="24b7660b-2775-4d8b-a237-4403b8878eda"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Center">
                    <font size="8"/>
                </textElement>
                <text><![CDATA[Practice name & Address]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-22" x="324" y="169" width="206" height="13"
                               uuid="a29ad60d-8adc-4fc0-bbef-9c69fed5e0fe"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Credit Card Payment:
]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-23" x="324" y="188" width="206" height="16"
                               uuid="d996624b-16a9-48b8-bb0c-c766e9ba10a6"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Card No: _ _ _ _  _ _ _ _  _ _ _ _  _ _ _ _]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-24" x="324" y="209" width="206" height="13"
                               uuid="51e44b45-8a43-4a45-9ee3-039331b24f9b"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Expiry No: _ _ / _ _  Verification No: _ _ _]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-27" x="324" y="226" width="206" height="18"
                               uuid="9f998d4d-f19a-4664-84a2-d7cbb03a37ef"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Signature:_________________________]]></text>
            </staticText>
            <staticText>
                <reportElement key="staticText-28" x="14" y="169" width="190" height="50"
                               uuid="7992870a-92dc-4725-b554-f2ce9552930c"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <text><![CDATA[To Make EFT Payment:
BSB: 000 000  ACC: 123456
Ref: Patient Name and Surname

]]></text>
            </staticText>
            <textField isStretchWithOverflow="true" evaluationTime="Report">
                <reportElement x="14" y="3" width="288" height="33" uuid="190ac6e9-86a3-4354-885e-7fd447bbb62b">
                    <property name="local_mesure_unitwidth" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                    <property name="local_mesure_unitheight" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.height" value="px"/>
                </reportElement>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{hiddenOK}?"":("!!! HIDE TXN ERROR !!! - Totals show all txns\n"+
	"Imbalance="+$V{DEBIT_TOTAL}.subtract($V{CREDIT_TOTAL}).subtract($V{DEBIT_TOTAL_ALL}).add($V{CREDIT_TOTAL_ALL}).toString()
)]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement key="staticText-16" x="324" y="62" width="190" height="18"
                               uuid="b73592be-cccf-49e0-8e75-49c5747b0249">
                    <property name="local_mesure_unitx" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                    <property name="local_mesure_unity" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.y" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Please cut off and send with payment]]></text>
            </staticText>
            <textField isBlankWhenNull="true">
                <reportElement key="textField-12" x="14" y="90" width="253" height="14"
                               uuid="e78dfa25-737c-42fb-a051-2d09419417fa"/>
                <textElement>
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{customer.entity.companyName}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement key="textField-1" x="14" y="104" width="253" height="14"
                               uuid="73283f61-f0e6-4788-99f3-46a41f68fccd">
                    <property name="local_mesure_unitheight" value="pixel"/>
                    <property name="com.jaspersoft.studio.unit.height" value="px"/>
                </reportElement>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{[party:getPartyFullName(.)]}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="false">
                <reportElement key="textField-2" x="14" y="118" width="253" height="38"
                               uuid="467a4e1a-a1d6-465b-aa60-7b0e71cdf923"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{[party:getBillingAddress(.)]}]]></textFieldExpression>
            </textField>
        </band>
    </lastPageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport>
