<project default="jar:jar"
  xmlns:ant="jelly:ant"
  xmlns:maven="jelly:maven"
  xmlns:j="jelly:core">

  <goal name="archetype:load"
        description="Load the Archetypes from a directory">
    <ant:java
          classname="org.openvpms.tools.archetype.loader.ArchetypeLoader"
          failonerror="true"
          fork="true">
            <ant:classpath>
               <ant:pathelement path="${maven.build.dest}"/>
               <ant:path refid="maven.dependency.classpath"/>
            </ant:classpath>
          <arg line="${openvpms.archetype.loader.cmdline}"/>
      </ant:java>  
    </goal>
	<goal name="data:load" description="Load the Archetyped Data">
    	<attainGoal name="java:compile"/>
	    <attainGoal name="java:jar-resources"/>
		<ant:java
        	classname="org.openvpms.tools.data.loader.StaxArchetypeDataLoader"
	        failonerror="true"
	        maxmemory="512m"
    	    fork="true">
            <ant:classpath>
           		<ant:pathelement path="${maven.build.dest}"/>
           		<ant:path refid="maven.dependency.classpath"/>
            </ant:classpath>
        	<arg line="${openvpms.data.loader.cmdline}"/>
    	</ant:java>	
    </goal>
	
	<goal name="stax:data:load" description="Load the Archetyped Data Using STAX">
    	<attainGoal name="java:compile"/>
	    <attainGoal name="java:jar-resources"/>
		<ant:java
        	classname="org.openvpms.tools.data.loader.StaxArchetypeDataLoader"
	        failonerror="true"
	        maxmemory="512m"
    	    fork="true">
            <ant:classpath>
           		<ant:path refid="maven.dependency.classpath"/>
           		<ant:pathelement path="${maven.build.dest}"/>
            </ant:classpath>
        	<arg line="${openvpms.data.loader.cmdline}"/>
    	</ant:java>	
    </goal>
	
</project>